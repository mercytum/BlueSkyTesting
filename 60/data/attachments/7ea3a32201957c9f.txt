# Instructions

- Following Playwright test failed.
- Explain why, be concise, respect Playwright best practices.
- Provide a snippet of code with the fix, if possible.

# Test info

- Name: Delete Last Created Post
- Location: /home/runner/work/BlueSkyTesting/BlueSkyTesting/__tests__/lib/Playwright/PostPageDeletion.test.ts:69:5

# Error details

```
Error: expect(received).toEqual(expected) // deep equality

Expected: 4
Received: 5
    at /home/runner/work/BlueSkyTesting/BlueSkyTesting/__tests__/lib/Playwright/PostPageDeletion.test.ts:134:29
```

# Page snapshot

```yaml
- main:
  - button "Back":
    - img
  - button "Edit profile": Edit Profile
  - button "More options":
    - img
  - text: cis565testgroup.bsky.social @cis565testgroup.bsky.social
  - link "2 followers"
  - link "0 following"
  - text: 5 posts
  - img "View cis565testgroup.bsky.social's avatar"
  - tablist:
    - tab "Posts"
    - tab "Replies"
    - tab "Media"
    - tab "Videos"
    - tab "Likes"
    - tab "Feeds"
    - tab "Starter Packs"
    - tab "Lists"
  - link "cis565testgroup.bsky.social's avatar View profileView profile · April 16, 2025 at 2:07 AM A Reply (0 replies) Repost or quote post Like (0 likes) Open post options menu":
    - link "cis565testgroup.bsky.social's avatar"
    - link "View profile": ‪cis565testgroup.bsky.social‬
    - link "View profile": ‪@cis565testgroup.bsky.social‬
    - text: ·
    - link "April 16, 2025 at 2:07 AM": 3m
    - text: A
    - button "Reply (0 replies)":
      - img
    - button "Repost or quote post":
      - img
    - button "Like (0 likes)":
      - img
    - button "Open post options menu":
      - img
  - link "cis565testgroup.bsky.social's avatar View profileView profile · April 15, 2025 at 2:31 AM Lorem ipsum odor amet, consectetuer adipiscing elit. Etiam himenaeos nascetur elit molestie semper. Sagittis ad senectus mauris; facilisi maximus a. Ex lectus ad tempor placerat egestas faucibus, a quam tincidunt. Parturient sagittis curae dignissim, tortor nam molestie ullamcorper mattis interdums. Reply (0 replies) Repost or quote post Like (0 likes) Open post options menu":
    - link "cis565testgroup.bsky.social's avatar"
    - link "View profile": ‪cis565testgroup.bsky.social‬
    - link "View profile": ‪@cis565testgroup.bsky.social‬
    - text: ·
    - link "April 15, 2025 at 2:31 AM": 23h
    - text: Lorem ipsum odor amet, consectetuer adipiscing elit. Etiam himenaeos nascetur elit molestie semper. Sagittis ad senectus mauris; facilisi maximus a. Ex lectus ad tempor placerat egestas faucibus, a quam tincidunt. Parturient sagittis curae dignissim, tortor nam molestie ullamcorper mattis interdums.
    - button "Reply (0 replies)":
      - img
    - button "Repost or quote post":
      - img
    - button "Like (0 likes)":
      - img
    - button "Open post options menu":
      - img
  - link "cis565testgroup.bsky.social's avatar View profileView profile · April 15, 2025 at 2:31 AM A Reply (0 replies) Repost or quote post Like (0 likes) Open post options menu":
    - link "cis565testgroup.bsky.social's avatar"
    - link "View profile": ‪cis565testgroup.bsky.social‬
    - link "View profile": ‪@cis565testgroup.bsky.social‬
    - text: ·
    - link "April 15, 2025 at 2:31 AM": 23h
    - text: A
    - button "Reply (0 replies)":
      - img
    - button "Repost or quote post":
      - img
    - button "Like (0 likes)":
      - img
    - button "Open post options menu":
      - img
  - link "cis565testgroup.bsky.social's avatar View profileView profile · April 15, 2025 at 2:31 AM Lorem ipsum odor amet, consectetuer adipiscing elit. Etiam himenaeos nascetur elit molestie semper. Sagittis ad senectus mauris; facilisi maximus a. Ex lectus ad tempor placerat egestas faucibus, a quam tincidunt. Parturient sagittis curae dignissim, tortor nam molestie ullamcorper mattis interdums. Reply (0 replies) Repost or quote post Like (0 likes) Open post options menu":
    - link "cis565testgroup.bsky.social's avatar"
    - link "View profile": ‪cis565testgroup.bsky.social‬
    - link "View profile": ‪@cis565testgroup.bsky.social‬
    - text: ·
    - link "April 15, 2025 at 2:31 AM": 23h
    - text: Lorem ipsum odor amet, consectetuer adipiscing elit. Etiam himenaeos nascetur elit molestie semper. Sagittis ad senectus mauris; facilisi maximus a. Ex lectus ad tempor placerat egestas faucibus, a quam tincidunt. Parturient sagittis curae dignissim, tortor nam molestie ullamcorper mattis interdums.
    - button "Reply (0 replies)":
      - img
    - button "Repost or quote post":
      - img
    - button "Like (0 likes)":
      - img
    - button "Open post options menu":
      - img
  - link "cis565testgroup.bsky.social's avatar View profileView profile · April 15, 2025 at 2:31 AM A Reply (0 replies) Repost or quote post Like (0 likes) Open post options menu":
    - link "cis565testgroup.bsky.social's avatar"
    - link "View profile": ‪cis565testgroup.bsky.social‬
    - link "View profile": ‪@cis565testgroup.bsky.social‬
    - text: ·
    - link "April 15, 2025 at 2:31 AM": 23h
    - text: A
    - button "Reply (0 replies)":
      - img
    - button "Repost or quote post":
      - img
    - button "Like (0 likes)":
      - img
    - button "Open post options menu":
      - img
  - button "New post":
    - img
- navigation:
  - button "Switch accounts"
  - link "Home"
  - link "Explore"
  - link "Notifications"
  - link "Chat"
  - link "Feeds"
  - link "Lists"
  - link "Profile"
  - link "Settings"
- img
- search "Search"
- link "Discover"
- link "Following"
- link "More feeds"
- img
- text: Trending
- button "Hide trending topics":
  - img
- link "Browse topic Abrego Garcia": Abrego Garcia
- link "Browse topic Dan Caldwell": Dan Caldwell
- link "Browse topic Karoline Leavitt": Karoline Leavitt
- link "Browse topic OpenAI Network": OpenAI Network
- link "Browse topic 4chan Hack": 4chan Hack
- link "Browse topic Jackie Robinson": Jackie Robinson
- link "Feedback"
- text: •
- link "Privacy"
- text: •
- link "Terms"
- text: •
- link "Help"
```

# Test source

```ts
   34 |
   35 | // getDate function
   36 | async function getDate() {
   37 |
   38 |   // Get current date
   39 |   const currentDate = new Date();
   40 |
   41 |   // Extract month, day and year from currentDate obj
   42 |   const monthIndex = currentDate.getMonth();
   43 |   const day = currentDate.getDate();
   44 |   const year = currentDate.getFullYear();
   45 |
   46 |   // Months of the year array list
   47 |   const monthNames = ['January','February','March','April','May','June','July','August','September','October','November','December'];
   48 |
   49 |   // Assign month name based on current month index
   50 |   const monthOfYr = monthNames[monthIndex];
   51 |
   52 |   // Format the date in mm dd, yyyy format
   53 |   const formatDate = `${monthOfYr} ${day}, ${year}`
   54 |
   55 |   // Return currentDate
   56 |   return formatDate;
   57 |
   58 | }
   59 |
   60 | // Setup functionality
   61 | test.beforeEach(async ({ page }) => {
   62 |
   63 |     // Call login function
   64 |     await login(page);
   65 |
   66 | });
   67 |
   68 | // Delete last created Post
   69 | test('Delete Last Created Post', {tag: '@post'}, async ({ page }) => {
   70 |
   71 |     // Get current date
   72 |     const currentDate = new Date();
   73 |
   74 |     // Extract month, day and year from currentDate obj
   75 |     const monthIndex = currentDate.getMonth();
   76 |     const day = currentDate.getDate();
   77 |     const year = currentDate.getFullYear();
   78 |
   79 |     // Months of the year array list
   80 |     const monthNames = ['January','February','March','April','May','June','July','August','September','October','November','December'];
   81 |
   82 |     // Assign month name based on current month index
   83 |     const monthOfYr = monthNames[monthIndex];
   84 |
   85 |     // Format the date in mm dd, yyyy format
   86 |     const formatDate = `${monthOfYr} ${day}, ${year}`;
   87 |
   88 |     // Navigate to Profile
   89 |     await page.getByRole('link', { name: 'Profile', exact: true }).click();
   90 |
   91 |     // Wait for 5 secs for page elems to full load
   92 |     await page.waitForTimeout(5000);
   93 |
   94 |     // Get the number of posts
   95 |     const post = await page.locator('xpath=//*[@id="root"]/div/div/div/div/div/main/div/div/div/div/div/div[2]/div/div[1]/div[1]/div/div[2]/div[3]/div/div').innerHTML();
   96 |
   97 |     // Split off the first element of variable
   98 |     let postNum: number = parseInt(post.split("")[0]);
   99 |
  100 |     // Select Post tab
  101 |     await page.getByTestId('profilePager-Posts').click();
  102 |
  103 |     // Wait for 5 secs for page elems to full load
  104 |     await page.waitForTimeout(5000);
  105 |
  106 |     // Select ellipses for post based on current date
  107 |     await page.getByRole('link', { name: `cis565testgroup.bsky.social\'s avatar View profileView profile · ${formatDate}` }).first().getByTestId('postDropdownBtn').click();
  108 |
  109 |     // Click delete this post
  110 |     await page.getByTestId('postDropdownDeleteBtn').click();
  111 |
  112 |     // Confirm post deletion
  113 |     await page.getByRole('button', { name: 'Delete' }).click();
  114 |
  115 |     // Wait for 5 secs for page elems to full load
  116 |     await page.waitForTimeout(5000);
  117 |
  118 |     // Initiate a page reload to show upated post numbers
  119 |     await page.reload();
  120 |
  121 |     // Navigate to profile (click on profile nav link)
  122 |     await page.getByRole('link', { name: 'Profile', exact: true }).click();
  123 |
  124 |     // Get the number of posts
  125 |     const postChk2 = await page.locator('xpath=//*[@id="root"]/div/div/div/div/div/main/div/div/div/div/div/div[2]/div/div[1]/div[1]/div/div[2]/div[3]/div/div').innerHTML();
  126 |
  127 |     // Split off the first element of variable
  128 |     let actualNum: number = parseInt(postChk2.split("")[0]);
  129 |  
  130 |     // Assertions
  131 |     let expectedPosts = postNum -=1;
  132 |
  133 |     // Expected posts number to have decremented as latest post was deleted
> 134 |     await expect(actualNum).toEqual(expectedPosts);   
      |                             ^ Error: expect(received).toEqual(expected) // deep equality
  135 |
  136 |
  137 | });
  138 |
```

# Local changes

```diff
diff --git a/.env b/.env
new file mode 100644
index 000000000..3149fd510
--- /dev/null
+++ b/.env
@@ -0,0 +1,3 @@
+# Global Environment variables
+BS_PASSWORD = [add bluesky account password]
+BS_USERNAME = [add bluesky account username]
diff --git a/How To Deploy ReadMe.md b/How To Deploy ReadMe.md
index 6e94084a5..abcf53f8f 100644
--- a/How To Deploy ReadMe.md	
+++ b/How To Deploy ReadMe.md	
@@ -18,20 +18,39 @@
 ***
 
 ### How to run CI/CD Pipeline?
-##### 1. Commit a change to the 'main' branch or create a 'pull request'
+##### [Option 1] Commit a change to the 'main' branch 
+##### [Option 2] Create a 'pull request' to the 'main' branch
+##### [Option 3] Manually re-run any of the 'Playwright Test' previously executed within the 'Actions' section
 
 ***
 
 ## How to run Locally (without CI/CD Pipeline)?
 #### Prerequisites:
-###### 1. Ensure VS Code (v1.97.1 or later) is installed on your local machine 
-###### 2. Git clone this repo
-###### 3. Open the clone repo project within VS Code
-###### 4. Within VS Code Extensions, install the 'Playwright Test for VSCode by Microsoft" (v1.1.13 or later)
-###### 5. Enable the plugin once installed
-###### 6. Open terminal within VSCode and run "yarn" to install dependencies
-###### 7. Run "yarn web" to start local server instance and note the localhost url plus port being used to run the application
-###### 8. Open the playwright.config.ts file and set the webserver url attribute to equal the url indicated in Step 7 (in most cases it will run on http://127.0.0.1:19006)
-###### 9. Save changes within the playwright.config.ts file
-###### 10. Open another terminal instance, and run the following cmd: npx playwright test
-###### 11. [Optional] you can run the tests with parallelization by adding '--workers=3' 
+###### 1. Ensure VS Code (v1.97.1 or later) is installed on your local machine (https://code.visualstudio.com/download)
+###### 2. Ensure Node (v20 or later) is installed on your local machine (https://nodejs.org/en/download)
+###### -- run node -v (verify installation success)
+###### 3. Ensure yarn (v1.22.22) is installed on your local machine (https://classic.yarnpkg.com/lang/en/docs/install/)
+###### -- run npm install --global yarn
+###### -- run yarn --version (verify installation success)
+###### 4. Ensure npm Dotenv is installed (https://www.npmjs.com/package/dotenv)
+
+#### Setup Project:
+###### 1. Git clone this repo
+###### 2. Open the clone repo project within VS Code
+###### 3. Within the root of cloned project, navigate to the .env file and add your bluesky account password to the BS_PASSWORD variable and bluesky username to the BS_USERNAME variable and save the file
+
+###### 4. Navigate to each test file within the \_\_tests\_\_/lib/Playwright directory and change the following: 
+###### 'const BSKY_EMAIL = process.env.SECRET_USR;' to 'const BSKY_EMAIL = process.env.BS_USERNAME;'
+###### 'const BSKY_PASS = process.env.SECRET_PWD;' to 'const BSKY_PASS = process.env.BS_PASSWORD;'
+
+###### and add "import dotenv from 'dotenv';" to the top of the .ts files (all of them).
+
+###### 5. Save the files
+
+#### Run the Tests:
+###### 1. Open terminal within VSCode and run "yarn" to install dependencies
+###### 2. Run "yarn web" to start local server instance and note the localhost url plus port being used to run the application (this takes several minutes)
+###### 3. Open the playwright.config.ts file and set the webserver url attribute to equal the url indicated in Step 2 (in most cases it will run on http://127.0.0.1:19006)
+###### 4. Save changes within the playwright.config.ts file
+###### 5. Open another terminal instance, and run the following cmd: npx playwright test
+###### 6. [Optional] you can run the tests with parallelization by adding '--workers=3' 
\ No newline at end of file
```